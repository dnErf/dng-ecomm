{"version":3,"sources":["./src/app/components/account-text.component.ts","./src/app/components/account-text.component.html","./src/app/pages/account/account.module.ts","./src/app/pages/account/login/login.page.ts","./src/app/pages/account/login/login.page.html","./src/app/pages/account/register/register.page.ts","./src/app/pages/account/register/register.page.html"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAsF;;;;;;IC0GpF,oEAAoI;;;IAGpI,uEAAkD;IAAA,uDAAuB;IAAA,4DAAO;;;IAA9B,0DAAuB;IAAvB,kGAAuB;;;IACzE,uEAAiD;IAAA,gFAAqB;IAAA,4DAAO;;;IAF7E,yEACA;IAAA,wHAAkD;IAClD,wHAAiD;IAEjD,4DAAM;;;IAHA,0DAA2C;IAA3C,6JAA2C;IAC3C,0DAA0C;IAA1C,4JAA0C;;;IAK5C,uEAAqD;IAAA,kFAAuB;IAAA,4DAAO;;;IADvF,0EACI;IAAA,wHAAqD;IACzD,4DAAM;;;IADI,0DAA8C;IAA9C,gKAA8C;;AD5GnD,MAAM,oBAAoB;IAM/B,YAA2B,UAAqB;QAArB,eAAU,GAAV,UAAU,CAAW;QAHvC,SAAI,GAAG,MAAM,CAAC;QAIrB,IAAI,CAAC,UAAU,CAAC,aAAa,GAAG,IAAI,CAAC;IACvC,CAAC;IAED,QAAQ;QACN,IAAI,OAAO,GAAG,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC;QACtC,IAAI,UAAU,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;QAC9D,IAAI,eAAe,GAAG,OAAO,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;QAE7E,OAAO,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;QAClC,OAAO,CAAC,kBAAkB,CAAC,eAAe,CAAC,CAAC;QAC5C,OAAO,CAAC,sBAAsB,EAAE,CAAC;IACnC,CAAC;IAED,QAAQ,CAAC,KAAK,IAAI,CAAC;IAEnB,SAAS,KAAK,CAAC;IAEf,UAAU,CAAC,GAAQ;QACjB,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,KAAK,GAAG,GAAG,IAAI,EAAE,CAAC;IAC7C,CAAC;IAED,gBAAgB,CAAC,EAAO;QACtB,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;IACrB,CAAC;IAED,iBAAiB,CAAC,EAAO;QACvB,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;IACtB,CAAC;IAED,YAAY;QACV,OAAO,CAAC,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,CAAC,OAAO,IAAI,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,OAAO,CAAC;YACpF,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,KAAK;gBAC/B,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,KAAK;oBAC/B,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,KAAK;wBAC/B,CAAC,CAAC,UAAU;wBACZ,CAAC,CAAC,YAAY;oBACd,CAAC,CAAC,YAAY;gBACd,CAAC,CAAC,IAAI;YACN,CAAC,CAAC,IAAI;IACV,CAAC;;wFA9CU,oBAAoB;oGAApB,oBAAoB;;;;;;QCwFjC,yEACE;QAAA,8EAUA;QAPI,iJAAS,iCAA6B,IAAC,iFAC/B,eAAW,IADoB;QAH3C,4DAUA;QAAA,gHAA8H;QAC9H,2EAAuB;QAAA,uDAAW;QAAA,4DAAQ;QAC1C,gHACA;QAKA,gHACI;QAEN,4DAAM;;QAhBA,0DAAgB;QAAhB,oFAAgB;QAGhB,6FAAyB;QAPzB,uFAA0B;QASzB,0DAAmF;QAAnF,yJAAmF;QACjF,0DAAe;QAAf,qFAAe;QAAC,0DAAW;QAAX,0EAAW;QACJ,0DAAqG;QAArG,6KAAqG;QAM7F,0DAAmG;QAAnG,2KAAmG;;6FD3G9H,oBAAoB;cAJhC,uDAAS;eAAC;gBACT,QAAQ,EAAE,cAAc;gBACxB,WAAW,EAAE,+BAA+B;aAC7C;;sBAOc,kDAAI;;kBAJhB,uDAAS;mBAAC,OAAO,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE;;kBACnC,mDAAK;;kBACL,mDAAK;;;;;;;;;;;;;;AEXR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+C;AACN;AACyB;AACnB;AAC/C,OAAO;AAC4D;AACS;AACK;;;AAsB1E,MAAM,aAAa;;4FAAb,aAAa;oJAAb,aAAa,mBAJb,EAEV,YAZQ;YACP,4DAAY;YACZ,0DAAW;YACX,kEAAmB;YACnB,4DAAY,CAAC,QAAQ,CAAC;gBACpB,EAAE,IAAI,EAAE,OAAO,EAAE,SAAS,EAAE,gFAAS,EAAE;gBACvC,EAAE,IAAI,EAAE,UAAU,EAAE,SAAS,EAAE,yFAAY,EAAE;aAC9C,CAAC;SAEH;mIAKU,aAAa,mBAlBtB,yFAAY;QACZ,gFAAS;QACT,8FAAoB,aAGpB,4DAAY;QACZ,0DAAW;QACX,kEAAmB;6FAWV,aAAa;cApBzB,sDAAQ;eAAC;gBACR,YAAY,EAAE;oBACZ,yFAAY;oBACZ,gFAAS;oBACT,8FAAoB;iBACrB;gBACD,OAAO,EAAE;oBACP,4DAAY;oBACZ,0DAAW;oBACX,kEAAmB;oBACnB,4DAAY,CAAC,QAAQ,CAAC;wBACpB,EAAE,IAAI,EAAE,OAAO,EAAE,SAAS,EAAE,gFAAS,EAAE;wBACvC,EAAE,IAAI,EAAE,UAAU,EAAE,SAAS,EAAE,yFAAY,EAAE;qBAC9C,CAAC;iBAEH;gBACD,SAAS,EAAE,EAEV;aACF;;;;;;;;;;;;;;AC5BD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkD;AACkB;;;;;;AAS7D,MAAM,SAAS;IAMpB,YACU,MAAa,EACb,cAA6B,EAC7B,WAA0B;QAF1B,WAAM,GAAN,MAAM,CAAO;QACb,mBAAc,GAAd,cAAc,CAAe;QAC7B,gBAAW,GAAX,WAAW,CAAe;IAChC,CAAC;IAEL,QAAQ;QACN,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,WAAW,CAAC,SAAS,IAAI,OAAO,CAAC;QAC/E,IAAI,CAAC,eAAe,EAAE,CAAC;IACzB,CAAC;IAED,eAAe;QACb,IAAI,CAAC,SAAS,GAAG,IAAI,wDAAS,CAAC;YAC7B,KAAK,EAAE,IAAI,0DAAW,CACpB,EAAE,EAAE,yDAAU,CAAC,OAAO,CAAC,uCAAuC,CAAC,CAChE;YACD,QAAQ,EAAE,IAAI,0DAAW,CAAC,EAAE,EAAE,yDAAU,CAAC,QAAQ,CAAC;SACnD,CAAC,CAAC;IACL,CAAC;IAED,QAAQ;QACN,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC;aACzC,SAAS,CACR,GAAG,EAAE;YACH,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QAC5C,CAAC,EACD,CAAC,GAAG,EAAE,EAAE;YACN,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QACnB,CAAC,CACF;IACL,CAAC;;kEApCU,SAAS;yFAAT,SAAS;QCTtB,yEACE;QAAA,yEACE;QAAA,0EACE;QAD4B,qIAAY,cAAU,IAAC;QACnD,yEACE;QAAA,wEAAuC;QAAA,gEAAK;QAAA,4DAAK;QACnD,4DAAM;QACN,6EAA+E;QAC/E,6EAAiG;QACjG,4EAA8F;QAAA,kEAAO;QAAA,4DAAS;QAChH,4DAAO;QACT,4DAAM;QACR,4DAAM;;QATI,0DAAuB;QAAvB,oFAAuB;QAIW,0DAAyB;QAAzB,kFAAyB;QACtB,0DAAoB;QAApB,6EAAoB;QACrD,0DAA8B;QAA9B,2FAA8B;;6FDC/B,SAAS;cAJrB,uDAAS;eAAC;gBACT,QAAQ,EAAE,eAAe;gBACzB,WAAW,EAAE,mBAAmB;aACjC;;;;;;;;;;;;;;AETD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkD;AACoC;AAEtC;AACf;;;;;;AAQ1B,MAAM,YAAY;IAKvB,YACU,EAAc,EACd,WAA0B,EAC1B,MAAa;QAFb,OAAE,GAAF,EAAE,CAAY;QACd,gBAAW,GAAX,WAAW,CAAe;QAC1B,WAAM,GAAN,MAAM,CAAO;IACnB,CAAC;IAEL,QAAQ;QACN,IAAI,CAAC,kBAAkB,EAAE,CAAC;IAC5B,CAAC;IAED,kBAAkB;QAChB,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC;YAChC,WAAW,EAAE,CAAC,IAAI,EAAE,CAAC,yDAAU,CAAC,QAAQ,CAAC,CAAC;YAC1C,KAAK,EAAE;gBACL,IAAI;gBACJ,CAAC,yDAAU,CAAC,QAAQ,EAAE,yDAAU,CAAC,OAAO,CAAC,uCAAuC,CAAC,CAAC;gBAClF,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC;aAC/B;YACD,QAAQ,EAAE,CAAC,IAAI,EAAE,CAAC,yDAAU,CAAC,QAAQ,CAAC,CAAC;SACxC,CAAC,CAAC;IACL,CAAC;IAED,QAAQ;QACN,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC;aACjD,SAAS,CACR,CAAC,QAAQ,EAAE,EAAE;YACX,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;QACrC,CAAC,EACD,CAAC,GAAG,EAAE,EAAE;YACN,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;YACjB,IAAI,CAAC,MAAM,GAAG,GAAG,CAAC,MAAM,CAAC;QAC3B,CAAC,CACF,CAAC;IACJ,CAAC;IAED,qBAAqB;QACnB,OAAO,OAAO,CAAC,EAAE;YACf,OAAO,kDAAK,CAAC,GAAG,CAAC,CAAC,IAAI,CACpB,gEAAS,CAAC,GAAG,EAAE;gBACb,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE;oBAClB,OAAO,+CAAE,CAAC,IAAI,CAAC,CAAC;iBACjB;gBACD,OAAO,IAAI,CAAC,WAAW,CAAC,gBAAgB,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,IAAI,CAC1D,0DAAG,CAAC,GAAG,CAAC,EAAE;oBACR,OAAO,GAAG,CAAC,CAAC,CAAC,EAAE,WAAW,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC;gBAC5C,CAAC,CAAC,CACH,CAAC;YACJ,CAAC,CAAC,CACH,CAAC;QACJ,CAAC,CAAC;IACJ,CAAC;;wEAvDU,YAAY;4FAAZ,YAAY;QCZzB,yEACE;QAAA,yEACE;QAAA,0EACE;QAD+B,wIAAY,cAAU,IAAC;QACtD,yEACE;QAAA,wEAAuC;QAAA,mEAAQ;QAAA,4DAAK;QACtD,4DAAM;QAEN,6EAAoF;QACpF,6EAA+E;QAC/E,6EAAiG;QAEjG,4EAA+D;QAAA,oEAAQ;QAAA,4DAAS;QAClF,4DAAO;QACT,4DAAM;QACR,4DAAM;;QAZI,0DAA0B;QAA1B,uFAA0B;QAKc,0DAAwB;QAAxB,iFAAwB;QAC9B,0DAAyB;QAAzB,kFAAyB;QACtB,0DAAoB;QAApB,6EAAoB;;6FDGtD,YAAY;cAJxB,uDAAS;eAAC;gBACT,QAAQ,EAAE,kBAAkB;gBAC5B,WAAW,EAAE,sBAAsB;aACpC","file":"pages-account-account-module.js","sourcesContent":["import { Component, OnInit, ViewChild, ElementRef, Input, Self } from '@angular/core';\r\nimport { ControlValueAccessor, NgControl } from '@angular/forms';\r\n\r\n@Component({\r\n  selector: 'account-text',\r\n  templateUrl: './account-text.component.html'\r\n})\r\nexport class AccountTextComponent implements OnInit, ControlValueAccessor {\r\n\r\n  @ViewChild('input', { static: true }) input: ElementRef;\r\n  @Input() type = 'text';\r\n  @Input() label: string;\r\n\r\n  constructor(@Self() public controlDir: NgControl) {\r\n    this.controlDir.valueAccessor = this;\r\n  }\r\n\r\n  ngOnInit() {\r\n    let control = this.controlDir.control;\r\n    let validators = control.validator ? [control.validator] : [];\r\n    let asyncValidators = control.asyncValidator ? [control.asyncValidator] : [];\r\n\r\n    control.setValidators(validators);\r\n    control.setAsyncValidators(asyncValidators);\r\n    control.updateValueAndValidity();\r\n  }\r\n\r\n  onChange(event) { }\r\n\r\n  onTouched() { }\r\n\r\n  writeValue(obj: any): void {\r\n    this.input.nativeElement.value = obj || '';\r\n  }\r\n\r\n  registerOnChange(fn: any): void {\r\n    this.onChange = fn;\r\n  }\r\n\r\n  registerOnTouched(fn: any): void {\r\n    this.onTouched = fn;\r\n  }\r\n  \r\n  isValidInput() {\r\n    return (this.controlDir && this.controlDir.control && this.controlDir.control.touched) \r\n      ? this.controlDir.control.dirty \r\n      ? this.controlDir.control.valid \r\n      ? this.controlDir.control.value\r\n      ? 'is-valid' \r\n      : 'is-invalid' \r\n      : 'is-invalid'\r\n      : null  \r\n      : null\r\n  }\r\n\r\n}","<style>\r\n\r\n  .form-label-group {\r\n    position: relative;\r\n    margin-bottom: 1rem;\r\n  }\r\n  \r\n  .form-label-group input,\r\n  .form-label-group label {\r\n    height: 3.125rem;\r\n    padding: .75rem;\r\n  }\r\n  \r\n  .form-label-group label {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    display: block;\r\n    width: 100%;\r\n    margin-bottom: 0; /* Override default `<label>` margin */\r\n    line-height: 1.5;\r\n    color: #495057;\r\n    pointer-events: none;\r\n    cursor: text; /* Match the input under the label */\r\n    border: 1px solid transparent;\r\n    border-radius: .25rem;\r\n    transition: all .1s ease-in-out;\r\n  }\r\n  \r\n  .form-label-group input::-webkit-input-placeholder {\r\n    color: transparent;\r\n  }\r\n  \r\n  .form-label-group input::-moz-placeholder {\r\n    color: transparent;\r\n  }\r\n  \r\n  .form-label-group input:-ms-input-placeholder {\r\n    color: transparent;\r\n  }\r\n  \r\n  .form-label-group input::-ms-input-placeholder {\r\n    color: transparent;\r\n  }\r\n  \r\n  .form-label-group input::placeholder {\r\n    color: transparent;\r\n  }\r\n  \r\n  .form-label-group input:not(:-moz-placeholder-shown) {\r\n    padding-top: 1.25rem;\r\n    padding-bottom: .25rem;\r\n  }\r\n  \r\n  .form-label-group input:not(:-ms-input-placeholder) {\r\n    padding-top: 1.25rem;\r\n    padding-bottom: .25rem;\r\n  }\r\n  \r\n  .form-label-group input:not(:placeholder-shown) {\r\n    padding-top: 1.25rem;\r\n    padding-bottom: .25rem;\r\n  }\r\n  \r\n  .form-label-group input:not(:-moz-placeholder-shown) ~ label {\r\n    padding-top: .25rem;\r\n    padding-bottom: .25rem;\r\n    font-size: 12px;\r\n    color: #777;\r\n  }\r\n  \r\n  .form-label-group input:not(:-ms-input-placeholder) ~ label {\r\n    padding-top: .25rem;\r\n    padding-bottom: .25rem;\r\n    font-size: 12px;\r\n    color: #777;\r\n  }\r\n  \r\n  .form-label-group input:not(:placeholder-shown) ~ label {\r\n    padding-top: .25rem;\r\n    padding-bottom: .25rem;\r\n    font-size: 12px;\r\n    color: #777;\r\n  }\r\n\r\n  .loader {\r\n    position: absolute;\r\n    width: auto;\r\n    top: 15px;\r\n    right: 10px;\r\n    margin-top: 0;\r\n  }\r\n  \r\n</style>\r\n\r\n<div class=\"form-label-group\">\r\n  <input \r\n      [ngClass]=\"isValidInput()\"\r\n      [type]=\"type\"\r\n      (input)=\"onChange($event.target.value)\"\r\n      (blur)=\"onTouched()\"\r\n      id=\"{{ label }}\" \r\n      #input\r\n      class=\"form-control\" \r\n      placeholder=\"{{ label }}\"\r\n  >\r\n  <div *ngIf=\"controlDir && controlDir.control && controlDir.control.status === 'PENDING'\" class=\"fa fa-spinner fa-spin loader\"></div>\r\n  <label for=\"{{label}}\">{{ label }}</label>\r\n  <div class=\"invalid-feedback\" *ngIf=\"(controlDir && controlDir.control && !controlDir.control.valid && controlDir.control.touched)\">\r\n  <span *ngIf=\"controlDir.control.errors?.required\">{{ label }} is required</span>\r\n  <span *ngIf=\"controlDir.control.errors?.pattern\">Invalid email address</span>\r\n  \r\n  </div>\r\n\r\n  <div class=\"invalid-feedback d-block\" *ngIf=\"(controlDir && controlDir.control && !controlDir.control.valid && controlDir.control.dirty)\">\r\n      <span *ngIf=\"controlDir.control.errors?.emailExists\">Email address is in use</span>\r\n  </div>\r\n</div>","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { RouterModule } from '@angular/router';\r\n// --- \r\nimport { LoginPage } from 'src/app/pages/account/login/login.page';\r\nimport { RegisterPage } from 'src/app/pages/account/register/register.page';\r\nimport { AccountTextComponent } from 'src/app/components/account-text.component';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    RegisterPage,\r\n    LoginPage,\r\n    AccountTextComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    RouterModule.forChild([\r\n      { path: 'login', component: LoginPage },\r\n      { path: 'register', component: RegisterPage }\r\n    ]),\r\n    \r\n  ],\r\n  providers: [\r\n    \r\n  ]\r\n})\r\nexport class AccountModule { }","import { Component, OnInit } from '@angular/core';\r\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\n// ---\r\nimport { AccountService } from 'src/app/core/services/account.service';\r\n\r\n@Component({\r\n  selector: 'account-login',\r\n  templateUrl: './login.page.html'\r\n})\r\nexport class LoginPage implements OnInit {\r\n\r\n  returnUrl;\r\n\r\n  loginForm:FormGroup;\r\n\r\n  constructor (\r\n    private router:Router,\r\n    private activatedRoute:ActivatedRoute,\r\n    private servAccount:AccountService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.returnUrl = this.activatedRoute.snapshot.queryParams.returnUrl || '/shop';\r\n    this.createLoginForm();\r\n  }\r\n\r\n  createLoginForm() {\r\n    this.loginForm = new FormGroup({\r\n      email: new FormControl(\r\n        '', Validators.pattern('^[\\\\w-\\\\.]+@([\\\\w-]+\\\\.)+[\\\\w-]{2,4}$')\r\n      ),\r\n      password: new FormControl('', Validators.required)\r\n    });\r\n  }\r\n\r\n  onSubmit() {\r\n    this.servAccount.login(this.loginForm.value)\r\n      .subscribe(\r\n        () => {\r\n          this.router.navigateByUrl(this.returnUrl);\r\n        },\r\n        (err) => {\r\n          console.log(err);\r\n        }\r\n      )\r\n  }\r\n\r\n}\r\n","\r\n<div class=\"d-flex justify-content-center mt-5\">\r\n  <div class=\"col-3\">\r\n    <form [formGroup]=\"loginForm\" (ngSubmit)=\"onSubmit()\">\r\n      <div class=\"text-center mb-4\">\r\n        <h1 class=\"h3 mb-3 font-weight-normal\">Login</h1>\r\n      </div>\r\n      <account-text formControlName=\"email\" [label]=\"'Email Address'\"></account-text>\r\n      <account-text formControlName=\"password\" [label]=\"'Password'\" [type]=\"'password'\"></account-text>   \r\n      <button [disabled]=\"loginForm.invalid\" class=\"btn btn-lg btn-primary btn-block\" type=\"submit\">Sign in</button>\r\n    </form>\r\n  </div>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\nimport { FormGroup, FormBuilder, Validators, AsyncValidatorFn } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { switchMap, map } from 'rxjs/operators';\r\nimport { timer, of } from 'rxjs';\r\n// ---\r\nimport { AccountService } from 'src/app/core/services/account.service';\r\n\r\n@Component({\r\n  selector: 'account-register',\r\n  templateUrl: './register.page.html'\r\n})\r\nexport class RegisterPage implements OnInit {\r\n\r\n  registerForm:FormGroup;\r\n  errors:string[];\r\n\r\n  constructor(\r\n    private fb:FormBuilder, \r\n    private servAccount:AccountService, \r\n    private router:Router\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.createRegisterForm();\r\n  }\r\n\r\n  createRegisterForm() {\r\n    this.registerForm = this.fb.group({\r\n      displayName: [null, [Validators.required]],\r\n      email: [\r\n        null,\r\n        [Validators.required, Validators.pattern('^[\\\\w-\\\\.]+@([\\\\w-]+\\\\.)+[\\\\w-]{2,4}$')],\r\n        [this.validateEmailNotTaken()]\r\n      ],\r\n      password: [null, [Validators.required]]\r\n    });\r\n  }\r\n\r\n  onSubmit() {\r\n    this.servAccount.register(this.registerForm.value)\r\n    .subscribe(\r\n      (response) => {\r\n        this.router.navigateByUrl('/shop');\r\n      }, \r\n      (err) => {\r\n        console.log(err);\r\n        this.errors = err.errors;\r\n      }\r\n    );\r\n  }\r\n\r\n  validateEmailNotTaken():AsyncValidatorFn {\r\n    return control => {\r\n      return timer(500).pipe(\r\n        switchMap(() => {\r\n          if (!control.value) {\r\n            return of(null);\r\n          }\r\n          return this.servAccount.checkEmailExists(control.value).pipe(\r\n            map(res => {\r\n              return res ? { emailExists: true } : null;\r\n            })\r\n          );\r\n        })\r\n      );\r\n    };\r\n  }\r\n\r\n}\r\n","<div class=\"d-flex justify-content-center mt-5\">\r\n  <div class=\"col-3\">\r\n    <form [formGroup]=\"registerForm\" (ngSubmit)=\"onSubmit()\">\r\n      <div class=\"text-center mb-4\">\r\n        <h1 class=\"h3 mb-3 font-weight-normal\">Register</h1>\r\n      </div>\r\n\r\n      <account-text formControlName=\"displayName\" [label]=\"'Display Name'\"></account-text>\r\n      <account-text formControlName=\"email\" [label]=\"'Email Address'\"></account-text>\r\n      <account-text formControlName=\"password\" [label]=\"'Password'\" [type]=\"'password'\"></account-text>\r\n     \r\n      <button class=\"btn btn-lg btn-primary btn-block\" type=\"submit\">Register</button>\r\n    </form>\r\n  </div>\r\n</div>"],"sourceRoot":"webpack:///"}