{"version":3,"sources":["./src/app/pages/account/account.module.ts","./src/app/pages/account/login/login.page.ts","./src/app/pages/account/login/login.page.html","./src/app/pages/account/register/register.page.ts","./src/app/pages/account/register/register.page.html"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+C;AACN;AACM;AAC/C,OAAO;AACqD;AACO;AACS;;;AAmBrE,MAAM,aAAa;;4FAAb,aAAa;oJAAb,aAAa,mBAJb,EAEV,YAVQ;YACP,4DAAY;YACZ,yEAAY;YACZ,4DAAY,CAAC,QAAQ,CAAC;gBACpB,EAAE,IAAI,EAAE,OAAO,EAAE,SAAS,EAAE,gFAAS,EAAE;gBACvC,EAAE,IAAI,EAAE,UAAU,EAAE,SAAS,EAAE,yFAAY,EAAE;aAC9C,CAAC;SACH;mIAKU,aAAa,mBAftB,yFAAY;QACZ,gFAAS,aAGT,4DAAY;QACZ,yEAAY;6FAUH,aAAa;cAjBzB,sDAAQ;eAAC;gBACR,YAAY,EAAE;oBACZ,yFAAY;oBACZ,gFAAS;iBACV;gBACD,OAAO,EAAE;oBACP,4DAAY;oBACZ,yEAAY;oBACZ,4DAAY,CAAC,QAAQ,CAAC;wBACpB,EAAE,IAAI,EAAE,OAAO,EAAE,SAAS,EAAE,gFAAS,EAAE;wBACvC,EAAE,IAAI,EAAE,UAAU,EAAE,SAAS,EAAE,yFAAY,EAAE;qBAC9C,CAAC;iBACH;gBACD,SAAS,EAAE,EAEV;aACF;;;;;;;;;;;;;;ACxBD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkD;AACkB;;;;;;AAS7D,MAAM,SAAS;IAMpB,YACU,MAAa,EACb,cAA6B,EAC7B,WAA0B;QAF1B,WAAM,GAAN,MAAM,CAAO;QACb,mBAAc,GAAd,cAAc,CAAe;QAC7B,gBAAW,GAAX,WAAW,CAAe;IAChC,CAAC;IAEL,QAAQ;QACN,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,WAAW,CAAC,SAAS,IAAI,OAAO,CAAC;QAC/E,IAAI,CAAC,eAAe,EAAE,CAAC;IACzB,CAAC;IAED,eAAe;QACb,IAAI,CAAC,SAAS,GAAG,IAAI,wDAAS,CAAC;YAC7B,KAAK,EAAE,IAAI,0DAAW,CACpB,EAAE,EAAE,yDAAU,CAAC,OAAO,CAAC,uCAAuC,CAAC,CAChE;YACD,QAAQ,EAAE,IAAI,0DAAW,CAAC,EAAE,EAAE,yDAAU,CAAC,QAAQ,CAAC;SACnD,CAAC,CAAC;IACL,CAAC;IAED,QAAQ;QACN,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC;aACzC,SAAS,CACR,GAAG,EAAE;YACH,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QAC5C,CAAC,EACD,CAAC,GAAG,EAAE,EAAE;YACN,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QACnB,CAAC,CACF;IACL,CAAC;;kEApCU,SAAS;yFAAT,SAAS;QCTtB,yEACE;QAAA,yEACE;QAAA,0EACE;QAD4B,qIAAY,cAAU,IAAC;QACnD,yEACE;QAAA,wEAAuC;QAAA,gEAAK;QAAA,4DAAK;QACnD,4DAAM;QACN,yEAAuE;QACvE,yEAAyF;QACzF,4EAA8F;QAAA,kEAAO;QAAA,4DAAS;QAChH,4DAAO;QACT,4DAAM;QACR,4DAAM;;QATI,0DAAuB;QAAvB,oFAAuB;QAIO,0DAAyB;QAAzB,kFAAyB;QACtB,0DAAoB;QAApB,6EAAoB;QACjD,0DAA8B;QAA9B,2FAA8B;;6FDC/B,SAAS;cAJrB,uDAAS;eAAC;gBACT,QAAQ,EAAE,eAAe;gBACzB,WAAW,EAAE,mBAAmB;aACjC;;;;;;;;;;;;;;AETD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkD;AACoC;AAEtC;AACf;;;;;;AAQ1B,MAAM,YAAY;IAKvB,YACU,EAAc,EACd,WAA0B,EAC1B,MAAa;QAFb,OAAE,GAAF,EAAE,CAAY;QACd,gBAAW,GAAX,WAAW,CAAe;QAC1B,WAAM,GAAN,MAAM,CAAO;IACnB,CAAC;IAEL,QAAQ;QACN,IAAI,CAAC,kBAAkB,EAAE,CAAC;IAC5B,CAAC;IAED,kBAAkB;QAChB,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC;YAChC,WAAW,EAAE,CAAC,IAAI,EAAE,CAAC,yDAAU,CAAC,QAAQ,CAAC,CAAC;YAC1C,KAAK,EAAE;gBACL,IAAI;gBACJ,CAAC,yDAAU,CAAC,QAAQ,EAAE,yDAAU,CAAC,OAAO,CAAC,uCAAuC,CAAC,CAAC;gBAClF,CAAC,IAAI,CAAC,qBAAqB,EAAE,CAAC;aAC/B;YACD,QAAQ,EAAE,CAAC,IAAI,EAAE,CAAC,yDAAU,CAAC,QAAQ,CAAC,CAAC;SACxC,CAAC,CAAC;IACL,CAAC;IAED,QAAQ;QACN,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC;aACjD,SAAS,CACR,CAAC,QAAQ,EAAE,EAAE;YACX,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;QACrC,CAAC,EACD,CAAC,GAAG,EAAE,EAAE;YACN,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;YACjB,IAAI,CAAC,MAAM,GAAG,GAAG,CAAC,MAAM,CAAC;QAC3B,CAAC,CACF,CAAC;IACJ,CAAC;IAED,qBAAqB;QACnB,OAAO,OAAO,CAAC,EAAE;YACf,OAAO,kDAAK,CAAC,GAAG,CAAC,CAAC,IAAI,CACpB,gEAAS,CAAC,GAAG,EAAE;gBACb,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE;oBAClB,OAAO,+CAAE,CAAC,IAAI,CAAC,CAAC;iBACjB;gBACD,OAAO,IAAI,CAAC,WAAW,CAAC,gBAAgB,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,IAAI,CAC1D,0DAAG,CAAC,GAAG,CAAC,EAAE;oBACR,OAAO,GAAG,CAAC,CAAC,CAAC,EAAE,WAAW,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC;gBAC5C,CAAC,CAAC,CACH,CAAC;YACJ,CAAC,CAAC,CACH,CAAC;QACJ,CAAC,CAAC;IACJ,CAAC;;wEAvDU,YAAY;4FAAZ,YAAY;QCZzB,yEACE;QAAA,yEACE;QAAA,0EACE;QAD+B,wIAAY,cAAU,IAAC;QACtD,yEACE;QAAA,wEAAuC;QAAA,mEAAQ;QAAA,4DAAK;QACtD,4DAAM;QAEN,yEAA4E;QAC5E,yEAAuE;QACvE,yEAAyF;QAEzF,4EAA+D;QAAA,oEAAQ;QAAA,4DAAS;QAClF,4DAAO;QACT,4DAAM;QACR,4DAAM;;QAZI,0DAA0B;QAA1B,uFAA0B;QAKU,0DAAwB;QAAxB,iFAAwB;QAC9B,0DAAyB;QAAzB,kFAAyB;QACtB,0DAAoB;QAApB,6EAAoB;;6FDGlD,YAAY;cAJxB,uDAAS;eAAC;gBACT,QAAQ,EAAE,kBAAkB;gBAC5B,WAAW,EAAE,sBAAsB;aACpC","file":"pages-account-account-module.js","sourcesContent":["import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { RouterModule } from '@angular/router';\r\n// --- \r\nimport { SharedModule } from 'src/app/common/shared.module';\r\nimport { LoginPage } from 'src/app/pages/account/login/login.page';\r\nimport { RegisterPage } from 'src/app/pages/account/register/register.page';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    RegisterPage,\r\n    LoginPage,\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    SharedModule,\r\n    RouterModule.forChild([\r\n      { path: 'login', component: LoginPage },\r\n      { path: 'register', component: RegisterPage }\r\n    ])\r\n  ],\r\n  providers: [\r\n    \r\n  ]\r\n})\r\nexport class AccountModule { }","import { Component, OnInit } from '@angular/core';\r\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\n// ---\r\nimport { AccountService } from 'src/app/core/services/account.service';\r\n\r\n@Component({\r\n  selector: 'account-login',\r\n  templateUrl: './login.page.html'\r\n})\r\nexport class LoginPage implements OnInit {\r\n\r\n  returnUrl;\r\n\r\n  loginForm:FormGroup;\r\n\r\n  constructor (\r\n    private router:Router,\r\n    private activatedRoute:ActivatedRoute,\r\n    private servAccount:AccountService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.returnUrl = this.activatedRoute.snapshot.queryParams.returnUrl || '/shop';\r\n    this.createLoginForm();\r\n  }\r\n\r\n  createLoginForm() {\r\n    this.loginForm = new FormGroup({\r\n      email: new FormControl(\r\n        '', Validators.pattern('^[\\\\w-\\\\.]+@([\\\\w-]+\\\\.)+[\\\\w-]{2,4}$')\r\n      ),\r\n      password: new FormControl('', Validators.required)\r\n    });\r\n  }\r\n\r\n  onSubmit() {\r\n    this.servAccount.login(this.loginForm.value)\r\n      .subscribe(\r\n        () => {\r\n          this.router.navigateByUrl(this.returnUrl);\r\n        },\r\n        (err) => {\r\n          console.log(err);\r\n        }\r\n      )\r\n  }\r\n\r\n}\r\n","\r\n<div class=\"d-flex justify-content-center mt-5\">\r\n  <div class=\"col-3\">\r\n    <form [formGroup]=\"loginForm\" (ngSubmit)=\"onSubmit()\">\r\n      <div class=\"text-center mb-4\">\r\n        <h1 class=\"h3 mb-3 font-weight-normal\">Login</h1>\r\n      </div>\r\n      <app-text formControlName=\"email\" [label]=\"'Email Address'\"></app-text>\r\n      <app-text formControlName=\"password\" [label]=\"'Password'\" [type]=\"'password'\"></app-text>   \r\n      <button [disabled]=\"loginForm.invalid\" class=\"btn btn-lg btn-primary btn-block\" type=\"submit\">Sign in</button>\r\n    </form>\r\n  </div>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\nimport { FormGroup, FormBuilder, Validators, AsyncValidatorFn } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { switchMap, map } from 'rxjs/operators';\r\nimport { timer, of } from 'rxjs';\r\n// ---\r\nimport { AccountService } from 'src/app/core/services/account.service';\r\n\r\n@Component({\r\n  selector: 'account-register',\r\n  templateUrl: './register.page.html'\r\n})\r\nexport class RegisterPage implements OnInit {\r\n\r\n  registerForm:FormGroup;\r\n  errors:string[];\r\n\r\n  constructor(\r\n    private fb:FormBuilder, \r\n    private servAccount:AccountService, \r\n    private router:Router\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.createRegisterForm();\r\n  }\r\n\r\n  createRegisterForm() {\r\n    this.registerForm = this.fb.group({\r\n      displayName: [null, [Validators.required]],\r\n      email: [\r\n        null,\r\n        [Validators.required, Validators.pattern('^[\\\\w-\\\\.]+@([\\\\w-]+\\\\.)+[\\\\w-]{2,4}$')],\r\n        [this.validateEmailNotTaken()]\r\n      ],\r\n      password: [null, [Validators.required]]\r\n    });\r\n  }\r\n\r\n  onSubmit() {\r\n    this.servAccount.register(this.registerForm.value)\r\n    .subscribe(\r\n      (response) => {\r\n        this.router.navigateByUrl('/shop');\r\n      }, \r\n      (err) => {\r\n        console.log(err);\r\n        this.errors = err.errors;\r\n      }\r\n    );\r\n  }\r\n\r\n  validateEmailNotTaken():AsyncValidatorFn {\r\n    return control => {\r\n      return timer(500).pipe(\r\n        switchMap(() => {\r\n          if (!control.value) {\r\n            return of(null);\r\n          }\r\n          return this.servAccount.checkEmailExists(control.value).pipe(\r\n            map(res => {\r\n              return res ? { emailExists: true } : null;\r\n            })\r\n          );\r\n        })\r\n      );\r\n    };\r\n  }\r\n\r\n}\r\n","<div class=\"d-flex justify-content-center mt-5\">\r\n  <div class=\"col-3\">\r\n    <form [formGroup]=\"registerForm\" (ngSubmit)=\"onSubmit()\">\r\n      <div class=\"text-center mb-4\">\r\n        <h1 class=\"h3 mb-3 font-weight-normal\">Register</h1>\r\n      </div>\r\n\r\n      <app-text formControlName=\"displayName\" [label]=\"'Display Name'\"></app-text>\r\n      <app-text formControlName=\"email\" [label]=\"'Email Address'\"></app-text>\r\n      <app-text formControlName=\"password\" [label]=\"'Password'\" [type]=\"'password'\"></app-text>\r\n     \r\n      <button class=\"btn btn-lg btn-primary btn-block\" type=\"submit\">Register</button>\r\n    </form>\r\n  </div>\r\n</div>"],"sourceRoot":"webpack:///"}